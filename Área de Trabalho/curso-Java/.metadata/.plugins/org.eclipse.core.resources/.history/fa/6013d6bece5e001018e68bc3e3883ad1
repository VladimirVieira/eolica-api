package br.com.ufrn.pds1.projetopds1.service;

import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Service;

import br.com.ufrn.pds1.projetopds1.exception.DadosInvalidosException;

@Service
public class DadosLocalEolicaService extends DadosLocalServiceTemplate {
	//**********************************************************************************************************************
			//Constroi a URL
			@Override
			public String construirUrl(String latitude, String longitude, String data) {
							
				return  String.format(
						"https://api.open-meteo.com/v1/forecast?"
						+ "latitude=%s&"
						+ "longitude=%s&"
						+ "hourly=temperature_2m,windspeed_10m&start_date=%s&end_date=%s&timezone=America/Fortaleza"
						,latitude, longitude, data, data);
			}
			
	//**********************************************************************************************************************
			//Método para obter dados de temperatura do dia
			public Double obterDadosTemperatura(Map<String, Object> hourly){
				
				if (hourly == null) {
					throw new DadosInvalidosException("Apresenta dados inválidos para temperatura");
				}
				
				List<Double> temperaturas = (List<Double>) hourly.get("temperature_2m");
				return temperaturas.get(18);
				//Aqui muda
			}
	//**********************************************************************************************************************
		//Método para obter dados de ventos do dia
			public Double obterDadosVentos(Map<String, Object> hourly){
				
				if (hourly == null) {
					throw new DadosInvalidosException("Apresenta dados inválidos para ventos");
				}
		        
				List<Double> ventos = (List<Double>) hourly.get("windspeed_10m");
				return ventos.get(18);
				//Aqui muda
			}
}
